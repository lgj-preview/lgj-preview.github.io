import{C as ae}from"./Cover-Bqph5m1Y.js";import{g as te,p as le,aA as ne,u as ie,ar as W,c as y,bq as L,r as w,au as oe,a as se,b as re,d as r,m as T,f as ue,F as N,n as ce,i as de,j as fe,br as ve,bs as me,az as pe,D as ge,o as R,l as _,q as D,s as U,V as he,t as ye,_ as we}from"./index-DqMIcvTB.js";import{u as Se,V as $,f as Ce,m as Ie,a as be,b as ke,c as Ve}from"./VInput-DLQ4xE-S.js";import{V as Fe}from"./VChip-DZtiNkAu.js";const xe=le({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},...be({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>W(e).every(v=>v!=null&&typeof v=="object")},...Ie({clearable:!0})},"VFileInput"),Be=te()({name:"VFileInput",inheritAttrs:!1,props:xe(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,v){let{attrs:S,emit:b,slots:c}=v;const{t}=ne(),u=ie(e,"modelValue",e.modelValue,a=>W(a),a=>!e.multiple&&Array.isArray(a)?a[0]:a),{isFocused:l,focus:g,blur:f}=Se(e),h=y(()=>typeof e.showSize!="boolean"?e.showSize:void 0),A=y(()=>(u.value??[]).reduce((a,s)=>{let{size:F=0}=s;return a+F},0)),P=y(()=>L(A.value,h.value)),k=y(()=>(u.value??[]).map(a=>{const{name:s="",size:F=0}=a;return e.showSize?`${s} (${L(F,h.value)})`:s})),E=y(()=>{var s;const a=((s=u.value)==null?void 0:s.length)??0;return e.showSize?t(e.counterSizeString,a,P.value):t(e.counterString,a)}),n=w(),i=w(),o=w(),V=y(()=>l.value||e.active),d=y(()=>["plain","underlined"].includes(e.variant));function m(){var a;o.value!==document.activeElement&&((a=o.value)==null||a.focus()),l.value||g()}function C(a){var s;(s=o.value)==null||s.click()}function I(a){b("mousedown:control",a)}function z(a){var s;(s=o.value)==null||s.click(),b("click:control",a)}function X(a){a.stopPropagation(),m(),ce(()=>{u.value=[],de(e["onClick:clear"],a)})}return oe(u,a=>{(!Array.isArray(a)||!a.length)&&o.value&&(o.value.value="")}),se(()=>{const a=!!(c.counter||e.counter),s=!!(a||c.details),[F,G]=re(S),{modelValue:ze,...H}=$.filterProps(e),J=Ce(e);return r($,T({ref:n,modelValue:u.value,"onUpdate:modelValue":x=>u.value=x,class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":d.value},e.class],style:e.style,"onClick:prepend":C},F,H,{centerAffix:!d.value,focused:l.value}),{...c,default:x=>{let{id:M,isDisabled:B,isDirty:j,isReadonly:O,isValid:K}=x;return r(Ve,T({ref:i,"prepend-icon":e.prependIcon,onMousedown:I,onClick:z,"onClick:clear":X,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},J,{id:M.value,active:V.value||j.value,dirty:j.value||e.dirty,disabled:B.value,focused:l.value,error:K.value===!1}),{...c,default:Q=>{var q;let{props:{class:Y,...Z}}=Q;return r(N,null,[r("input",T({ref:o,type:"file",readonly:O.value,disabled:B.value,multiple:e.multiple,name:e.name,onClick:p=>{p.stopPropagation(),O.value&&p.preventDefault(),m()},onChange:p=>{if(!p.target)return;const ee=p.target;u.value=[...ee.files??[]]},onFocus:m,onBlur:f},Z,G),null),r("div",{class:Y},[!!((q=u.value)!=null&&q.length)&&!e.hideInput&&(c.selection?c.selection({fileNames:k.value,totalBytes:A.value,totalBytesReadable:P.value}):e.chips?k.value.map(p=>r(Fe,{key:p,size:"small",text:p},null)):k.value.join(", "))])])}})},details:s?x=>{var M,B;return r(N,null,[(M=c.details)==null?void 0:M.call(c,x),a&&r(N,null,[r("span",null,null),r(ke,{active:!!((B=u.value)!=null&&B.length),value:E.value,disabled:e.disabled},c.counter)])])}:void 0})}),ue({},n,i,o)}}),Re=["src"],_e={class:"file-share d-flex flex-row ga-1 flex-wrap"},Ae=["href"],Pe=fe({__name:"ShareSocial",setup(e){const v=ve(),S=w(v.query.e),b=w(v.query.name.toUpperCase()),c=w(v.query.r),t=me("canvas"),u=w("");let l=null;const g={yOff:-10,radius:188};pe(()=>{t.value&&(l=t.value.getContext("2d"))});const f=(n,i,o,V,d,m=!0,C=!0,I=!1)=>{n.textAlign=m?"center":"left",n.fillStyle=C?"#DCEBEB":"#007E8E",n.font=(I?"bold ":"")+o+"px NeueRadial",n.fillText(i,V,d+o/2)},h=new Image;h.src="/images/Elements/post-vertical.png",h.onload=()=>{if(l&&t.value){l.drawImage(h,0,0,t.value.width,t.value.height);const n=t.value.width/2;f(l,S.value,64,n,100,!0,!0,!0),f(l,S.value,36,n,175),f(l,b.value,36,n,675,!0,!1),f(l,c.value,36,n,735),f(l,S.value,24,165,870,!1),f(l,S.value,24,165,905,!1),l.beginPath(),l.arc(t.value.width/2,t.value.height/2+g.yOff,g.radius,0,Math.PI*2,!0),l.closePath(),l.clip(),u.value=t.value.toDataURL("image/png")}};const A=n=>{const i=n.target;if(i.files&&i.files[0]){const o=new FileReader;o.onload=V=>{var m;let d=new Image;d.src=(m=V.target)==null?void 0:m.result,d.onload=()=>{if(l&&t.value){l.drawImage(h,0,0,t.value.width,t.value.height);const C=d.height/d.width,I=g.radius*Math.max(1/C,1),z=g.radius*Math.max(C,1);l.drawImage(d,t.value.width/2-I,t.value.height/2+g.yOff-z,I*2,z*2),l.fillStyle="#DCEBEB",l.fillRect(0,652,t.value.width,200),f(l,b.value,36,t.value.width/2,675,!0,!1),u.value=t.value.toDataURL("image/png")}}},o.readAsDataURL(i.files[0])}},P=()=>{t.value&&t.value.toBlob(async n=>{if(n==null)return;const i=new File([n],"story.png",{type:"image/png"});new FormData().append("file",i),window.location.href="instagram://story"})},k=()=>{t.value&&t.value.toBlob(n=>{if(n==null)return;const i=new File([n],"badge.png",{type:"image/png"});navigator.canShare&&navigator.canShare({files:[i]})?navigator.share({files:[i],text:"Mi tarjeta del evento!"}):alert("Tu navegador no permite enviar imágenes directamente a WhatsApp Status.")})},E=async()=>{t.value&&t.value.toBlob(async n=>{if(n==null)return;const i=new File([n],"mi_badge_evento.png",{type:"image/png"});if(navigator.share)try{await navigator.share({title:"Mi Tarjeta del Evento",text:"¡Mira mi imagen del evento!",files:[i]})}catch(o){console.error(o)}else alert("Tu navegador no soporta compartir archivos.")})};return(n,i)=>(ye(),ge(ae,{paddingType:"regular"},{default:R(()=>[r(he,{class:"share-cont text-center d-flex flex-column ga-4 align-center"},{default:R(()=>[i[3]||(i[3]=_("h1",null,"¡Comparte!",-1)),_("canvas",{ref_key:"canvas",ref:t,width:"800",height:"1000",hidden:""}," Tu navegador no soporta el elemento canvas. ",512),_("img",{src:u.value,alt:"Imagen para compartir en redes sociales",class:"img-share"},null,8,Re),r(Be,{class:"file-share",label:"¡Sube tu foto!",hint:`Esta imagen solo se encuentra en tu navegador y no se almacena en ningún servidor.\r
        Reiniciar la página borrará la imagen.`,"persistent-hint":"",density:"compact",accept:"image/*","prepend-icon":"mdi-camera",onchange:A}),_("div",_e,[_("a",{download:"lgj-participacion.png",href:u.value},[r(D,{icon:"mdi-download","aria-label":"descargar"})],8,Ae),r(D,{id:"shareNative",onclick:E},{default:R(()=>i[0]||(i[0]=[U("Share (Android/iOS)")])),_:1}),r(D,{id:"shareIgStories",onclick:P},{default:R(()=>i[1]||(i[1]=[U("Instagram Stories")])),_:1}),r(D,{id:"shareWspStatus",onclick:k},{default:R(()=>i[2]||(i[2]=[U("WhatsApp Status")])),_:1})])]),_:1})]),_:1}))}}),Ne=we(Pe,[["__scopeId","data-v-7f9d28c1"]]);export{Ne as default};
