import{C as fe}from"./Cover-ChDcxR6v.js";import{g as Z,p as ee,ax as me,u as ae,ao as te,c as I,b0 as K,r as T,ar as Y,a as ne,b as he,d as i,m as R,f as le,F as U,n as oe,i as ge,aL as pe,aA as ye,a7 as be,aH as we,a4 as ke,aq as q,N as Ce,b1 as Se,aw as ie,b2 as Ve,ay as xe,aa as Pe,aN as _e,$ as Ie,aP as Te,aQ as Re,b3 as Be,b4 as Ae,b5 as Fe,at as De,aT as $e,b6 as Le,X as Ne,j as ze,b7 as Q,b8 as Ee,E as Me,o as D,l as $,q as j,z as Ue,s as je,Y as Oe,V as Ye,t as qe,_ as He}from"./index-B9PVhJsA.js";import{u as Ge,V as X,f as Je,m as Ke,a as Qe,b as Xe,c as We}from"./VInput-kAML4l4R.js";import{V as Ze}from"./VChip-C_AE9GPl.js";import{V as O}from"./VTooltip-B38oJjPP.js";import{V as W,m as ea}from"./VOverlay-CCBgETgQ.js";const aa=ee({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},...Qe({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>te(e).every(t=>t!=null&&typeof t=="object")},...Ke({clearable:!0})},"VFileInput"),ta=Z()({name:"VFileInput",inheritAttrs:!1,props:aa(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:d,emit:a,slots:v}=t;const{t:f}=me(),m=ae(e,"modelValue",e.modelValue,n=>te(n),n=>!e.multiple&&Array.isArray(n)?n[0]:n),{isFocused:s,focus:V,blur:P}=Ge(e),C=I(()=>typeof e.showSize!="boolean"?e.showSize:void 0),S=I(()=>(m.value??[]).reduce((n,c)=>{let{size:r=0}=c;return n+r},0)),g=I(()=>K(S.value,C.value)),w=I(()=>(m.value??[]).map(n=>{const{name:c="",size:r=0}=n;return e.showSize?`${c} (${K(r,C.value)})`:c})),p=I(()=>{var c;const n=((c=m.value)==null?void 0:c.length)??0;return e.showSize?f(e.counterSizeString,n,g.value):f(e.counterString,n)}),B=T(),A=T(),k=T(),F=I(()=>s.value||e.active),x=I(()=>["plain","underlined"].includes(e.variant));function l(){var n;k.value!==document.activeElement&&((n=k.value)==null||n.focus()),s.value||V()}function o(n){var c;(c=k.value)==null||c.click()}function u(n){a("mousedown:control",n)}function h(n){var c;(c=k.value)==null||c.click(),a("click:control",n)}function y(n){n.stopPropagation(),l(),oe(()=>{m.value=[],ge(e["onClick:clear"],n)})}return Y(m,n=>{(!Array.isArray(n)||!n.length)&&k.value&&(k.value.value="")}),ne(()=>{const n=!!(v.counter||e.counter),c=!!(n||v.details),[r,b]=he(d),{modelValue:L,...E}=X.filterProps(e),se=Je(e);return i(X,R({ref:B,modelValue:m.value,"onUpdate:modelValue":N=>m.value=N,class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":x.value},e.class],style:e.style,"onClick:prepend":o},r,E,{centerAffix:!x.value,focused:s.value}),{...v,default:N=>{let{id:M,isDisabled:z,isDirty:H,isReadonly:G,isValid:re}=N;return i(We,R({ref:A,"prepend-icon":e.prependIcon,onMousedown:u,onClick:h,"onClick:clear":y,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},se,{id:M.value,active:F.value||H.value,dirty:H.value||e.dirty,disabled:z.value,focused:s.value,error:re.value===!1}),{...v,default:ue=>{var J;let{props:{class:ce,...de}}=ue;return i(U,null,[i("input",R({ref:k,type:"file",readonly:G.value,disabled:z.value,multiple:e.multiple,name:e.name,onClick:_=>{_.stopPropagation(),G.value&&_.preventDefault(),l()},onChange:_=>{if(!_.target)return;const ve=_.target;m.value=[...ve.files??[]]},onFocus:l,onBlur:P},de,b),null),i("div",{class:ce},[!!((J=m.value)!=null&&J.length)&&!e.hideInput&&(v.selection?v.selection({fileNames:w.value,totalBytes:S.value,totalBytesReadable:g.value}):e.chips?w.value.map(_=>i(Ze,{key:_,size:"small",text:_},null)):w.value.join(", "))])])}})},details:c?N=>{var M,z;return i(U,null,[(M=v.details)==null?void 0:M.call(v,N),n&&i(U,null,[i("span",null,null),i(Xe,{active:!!((z=m.value)!=null&&z.length),value:p.value,disabled:e.disabled},v.counter)])])}:void 0})}),le({},B,A,k)}});function na(e){const t=q(e());let d=-1;function a(){clearInterval(d)}function v(){a(),oe(()=>t.value=e())}function f(m){const s=m?getComputedStyle(m):{transitionDuration:.2},V=parseFloat(s.transitionDuration)*1e3||200;if(a(),t.value<=0)return;const P=performance.now();d=window.setInterval(()=>{const C=performance.now()-P+V;t.value=Math.max(e()-C,0),t.value<=0&&a()},V)}return Be(a),{clear:a,time:t,start:f,reset:v}}const la=ee({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...Re({location:"bottom"}),...Te(),...Ie(),..._e(),...Pe(),...xe(ea({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),oa=Z()({name:"VSnackbar",props:la(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:d}=t;const a=ae(e,"modelValue"),{positionClasses:v}=pe(e),{scopeId:f}=ye(),{themeClasses:m}=be(e),{colorClasses:s,colorStyles:V,variantClasses:P}=we(e),{roundedClasses:C}=ke(e),S=na(()=>Number(e.timeout)),g=T(),w=T(),p=q(!1),B=q(0),A=T(),k=Ce(Ae,void 0);Se(()=>!!k,()=>{const r=Fe();De(()=>{A.value=r.mainStyles.value})}),Y(a,x),Y(()=>e.timeout,x),ie(()=>{a.value&&x()});let F=-1;function x(){S.reset(),window.clearTimeout(F);const r=Number(e.timeout);if(!a.value||r===-1)return;const b=Ve(w.value);S.start(b),F=window.setTimeout(()=>{a.value=!1},r)}function l(){S.reset(),window.clearTimeout(F)}function o(){p.value=!0,l()}function u(){p.value=!1,x()}function h(r){B.value=r.touches[0].clientY}function y(r){Math.abs(B.value-r.changedTouches[0].clientY)>50&&(a.value=!1)}function n(){p.value&&u()}const c=I(()=>e.location.split(" ").reduce((r,b)=>(r[`v-snackbar--${b}`]=!0,r),{}));return ne(()=>{const r=W.filterProps(e),b=!!(d.default||d.text||e.text);return i(W,R({ref:g,class:["v-snackbar",{"v-snackbar--active":a.value,"v-snackbar--multi-line":e.multiLine&&!e.vertical,"v-snackbar--timer":!!e.timer,"v-snackbar--vertical":e.vertical},c.value,v.value,e.class],style:[A.value,e.style]},r,{modelValue:a.value,"onUpdate:modelValue":L=>a.value=L,contentProps:R({class:["v-snackbar__wrapper",m.value,s.value,C.value,P.value],style:[V.value],onPointerenter:o,onPointerleave:u},r.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:h,onTouchend:y,onAfterLeave:n},f),{default:()=>{var L,E;return[$e(!1,"v-snackbar"),e.timer&&!p.value&&i("div",{key:"timer",class:"v-snackbar__timer"},[i(Le,{ref:w,color:typeof e.timer=="string"?e.timer:"info",max:e.timeout,"model-value":S.time.value},null)]),b&&i("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((L=d.text)==null?void 0:L.call(d))??e.text,(E=d.default)==null?void 0:E.call(d)]),d.actions&&i(Ne,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[i("div",{class:"v-snackbar__actions"},[d.actions({isActive:a})])]})]},activator:d.activator})}),le({},g)}}),ia=["src"],sa={class:"file-share d-flex flex-row ga-2 justify-center"},ra=["href"],ua={class:"text-center"},ca=ze({__name:"ShareSocial",setup(e){const t=Q("canvas"),d=Q("imgShare");let a=null;const v={w:1080,h:1920};let f={x:v.w/2,y:v.h/2};const m=Ee(),s=x(m.query.d),V=s.u.r=="a"?"Participaré":"Seré "+s.u.r,P=new Date(s.e.d).toLocaleDateString("es-PE",{weekday:"long",day:"2-digit",hour:"2-digit",minute:"2-digit"}).replace(", "," | ").replace(/[a-z]/,l=>l.toUpperCase()),C=T(""),S=T(!1);ie(()=>{t.value&&(a=t.value.getContext("2d")),d.value&&(d.value.alt=`${V} en el ${s.e.n}. ${s.u.n}, ${s.u.i}. ${P}, ${s.e.l}`)});const g=(l,o,u,h,y="normal",n=!0,c=!0,r=!1)=>{const b=y=="large"?82:y=="small"?32:52;l.textAlign=n?"center":"left",l.fillStyle=c?"#DCEBEB":"#007E8E",l.font=(r?"bold ":"")+b+"px NeueRadial",l.fillText(o,u,f.y+h+b/2)},w={yOff:-50,radius:320},p=new Image;p.src=`/images/Elements/post-vertical_${v.w}x${v.h}.png`,p.onload=()=>{d.value&&(d.value.style.aspectRatio=`${v.w} / ${v.h}`),a&&t.value&&(t.value.width=p.width,t.value.height=p.height,f={x:t.value.width/2,y:t.value.height/2},a.drawImage(p,0,0,t.value.width,t.value.height),g(a,V+" en el",f.x,-590),g(a,s.e.n.toUpperCase(),f.x,-515,"large",!0,!0,!0),g(a,s.u.n.toUpperCase(),f.x,265,"normal",!0,!1),g(a,s.u.i,f.x,365),g(a,P,f.x*.32,520,"small",!1),g(a,s.e.l,f.x*.32,560,"small",!1),a.beginPath(),a.arc(t.value.width/2,t.value.height/2+w.yOff,w.radius,0,Math.PI*2,!0),a.closePath(),a.clip(),C.value=t.value.toDataURL("image/png"))};const B=l=>{const o=l.target;if(o.files&&o.files[0]){const u=new FileReader;u.onload=h=>{var n;let y=new Image;y.src=(n=h.target)==null?void 0:n.result,y.onload=()=>{if(a&&t.value){a.drawImage(p,0,0,t.value.width,t.value.height);const c=y.height/y.width,r=w.radius*Math.max(1/c,1),b=w.radius*Math.max(c,1);a.drawImage(y,t.value.width/2-r,t.value.height/2+w.yOff-b,r*2,b*2),a.fillStyle="#DCEBEB",a.fillRect(0,f.y+223,t.value.width,200),g(a,s.u.n.toUpperCase(),f.x,265,"normal",!0,!1),C.value=t.value.toDataURL("image/png")}}},u.readAsDataURL(o.files[0])}},A=async()=>{t.value&&t.value.toBlob(async l=>{if(l==null)return;const o="lgj_"+s.e.n+"_"+s.u.i+".png",u=new File([l],o,{type:"image/png"});if(navigator.canShare&&navigator.canShare({files:[u]})&&navigator.share)try{await navigator.share({title:"Mi Tarjeta del "+s.e.n,text:"¡Mira mi tarjeta del "+s.e.n+"!",files:[u]})}catch(h){console.error(h)}else alert("Tu navegador no soporta compartir archivos.")})},k=async()=>{t.value&&t.value.toBlob(async l=>{if(l==null)return;const o=new ClipboardItem({[l.type]:l});await navigator.clipboard.write([o]),S.value=!0})};function F(l){const o=atob(l),u=new Uint8Array(o.length);for(let h=0;h<o.length;h++)u[h]=o.charCodeAt(h);return u}function x(l){const o=F(l),h=new TextDecoder().decode(o);return JSON.parse(h)}return(l,o)=>(qe(),Me(fe,{paddingType:"regular"},{default:D(()=>[i(Ye,{class:"share-cont text-center d-flex flex-column ga-4 align-center"},{default:D(()=>[o[2]||(o[2]=$("h1",null,"¡Comparte!",-1)),$("canvas",{ref_key:"canvas",ref:t,hidden:""}," Tu navegador no soporta el elemento canvas. ",512),$("img",{ref_key:"imgShare",ref:d,class:"img-share elevation-2",alt:"Imagen a compartir",src:C.value},null,8,ia),i(ta,{class:"file-share",label:"¡Sube tu foto!",hint:`Esta imagen solo se encuentra en tu navegador y no se almacena en ningún servidor.\r
        Reiniciar la página borrará la imagen.`,"persistent-hint":"",density:"compact",accept:"image/*","prepend-icon":"mdi-camera",onchange:B}),$("div",sa,[i(O,{text:"¡Descarga!",location:"top",theme:"light"},{activator:D(({props:u})=>[$("a",{download:"lgj-participacion.png",href:C.value},[i(j,R({color:"secondary",icon:"mdi-download","aria-label":"descargar"},u),null,16)],8,ra)]),_:1}),i(O,{text:"¡Comparte!",location:"top",theme:"light"},{activator:D(({props:u})=>[i(j,R({color:"secondary",icon:"mdi-share-variant","aria-label":"compartir",onclick:A},u),null,16)]),_:1}),i(O,{text:"Copia",location:"top",theme:"light"},{activator:D(({props:u})=>[i(j,R({color:"secondary",icon:"mdi-content-copy","aria-label":"compartir",onclick:k},u),null,16)]),_:1}),i(Ue(oa),{theme:"light",modelValue:S.value,"onUpdate:modelValue":o[0]||(o[0]=u=>S.value=u),timeout:1e3},{default:D(()=>[$("div",ua,[o[1]||(o[1]=je(" Imagen copiada ")),i(Oe,{icon:"mdi-check-bold"})])]),_:1},8,["modelValue"])])]),_:1})]),_:1}))}}),pa=He(ca,[["__scopeId","data-v-c5e72d27"]]);export{pa as default};
