import{C as ve}from"./Cover-DZuYcDmv.js";import{g as W,p as Z,ax as fe,u as ee,ao as ae,c as x,b0 as K,r as w,ar as q,a as te,b as me,d as o,m as T,f as ne,F as U,n as le,i as he,aL as pe,aA as ge,a7 as ye,aH as be,a4 as ke,aq as Y,N as we,b1 as Ve,aw as oe,b2 as Ce,ay as Se,aa as Pe,aN as Ie,$ as _e,aP as xe,aQ as Te,b3 as Re,b4 as Be,b5 as Ae,at as Fe,aT as De,b6 as Le,X as Me,j as Ne,b7 as ze,b8 as Ee,D as je,o as F,l as D,q as O,y as Ue,s as Oe,Y as $e,V as qe,t as Ye,_ as He}from"./index-BvDuY3uw.js";import{u as Xe,V as Q,f as Ge,m as Ke,a as Qe,b as Je,c as We}from"./VInput-B7VzMJAK.js";import{V as Ze}from"./VChip-BAIlW7cZ.js";import{V as $}from"./VTooltip-CZjbGkS5.js";import{V as J,m as ea}from"./VOverlay-DrSBRAVj.js";const aa=Z({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},...Qe({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>ae(e).every(m=>m!=null&&typeof m=="object")},...Ke({clearable:!0})},"VFileInput"),ta=W()({name:"VFileInput",inheritAttrs:!1,props:aa(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,m){let{attrs:s,emit:u,slots:f}=m;const{t}=fe(),d=ee(e,"modelValue",e.modelValue,a=>ae(a),a=>!e.multiple&&Array.isArray(a)?a[0]:a),{isFocused:g,focus:l,blur:b}=Xe(e),p=x(()=>typeof e.showSize!="boolean"?e.showSize:void 0),y=x(()=>(d.value??[]).reduce((a,v)=>{let{size:c=0}=v;return a+c},0)),R=x(()=>K(y.value,p.value)),S=x(()=>(d.value??[]).map(a=>{const{name:v="",size:c=0}=a;return e.showSize?`${v} (${K(c,p.value)})`:v})),P=x(()=>{var v;const a=((v=d.value)==null?void 0:v.length)??0;return e.showSize?t(e.counterSizeString,a,R.value):t(e.counterString,a)}),i=w(),r=w(),n=w(),k=x(()=>g.value||e.active),h=x(()=>["plain","underlined"].includes(e.variant));function V(){var a;n.value!==document.activeElement&&((a=n.value)==null||a.focus()),g.value||l()}function I(a){var v;(v=n.value)==null||v.click()}function C(a){u("mousedown:control",a)}function A(a){var v;(v=n.value)==null||v.click(),u("click:control",a)}function j(a){a.stopPropagation(),V(),le(()=>{d.value=[],he(e["onClick:clear"],a)})}return q(d,a=>{(!Array.isArray(a)||!a.length)&&n.value&&(n.value.value="")}),te(()=>{const a=!!(f.counter||e.counter),v=!!(a||f.details),[c,B]=me(s),{modelValue:L,...z}=Q.filterProps(e),ie=Ge(e);return o(Q,T({ref:i,modelValue:d.value,"onUpdate:modelValue":M=>d.value=M,class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":h.value},e.class],style:e.style,"onClick:prepend":I},c,z,{centerAffix:!h.value,focused:g.value}),{...f,default:M=>{let{id:E,isDisabled:N,isDirty:H,isReadonly:X,isValid:se}=M;return o(We,T({ref:r,"prepend-icon":e.prependIcon,onMousedown:C,onClick:A,"onClick:clear":j,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},ie,{id:E.value,active:k.value||H.value,dirty:H.value||e.dirty,disabled:N.value,focused:g.value,error:se.value===!1}),{...f,default:re=>{var G;let{props:{class:ue,...ce}}=re;return o(U,null,[o("input",T({ref:n,type:"file",readonly:X.value,disabled:N.value,multiple:e.multiple,name:e.name,onClick:_=>{_.stopPropagation(),X.value&&_.preventDefault(),V()},onChange:_=>{if(!_.target)return;const de=_.target;d.value=[...de.files??[]]},onFocus:V,onBlur:b},ce,B),null),o("div",{class:ue},[!!((G=d.value)!=null&&G.length)&&!e.hideInput&&(f.selection?f.selection({fileNames:S.value,totalBytes:y.value,totalBytesReadable:R.value}):e.chips?S.value.map(_=>o(Ze,{key:_,size:"small",text:_},null)):S.value.join(", "))])])}})},details:v?M=>{var E,N;return o(U,null,[(E=f.details)==null?void 0:E.call(f,M),a&&o(U,null,[o("span",null,null),o(Je,{active:!!((N=d.value)!=null&&N.length),value:P.value,disabled:e.disabled},f.counter)])])}:void 0})}),ne({},i,r,n)}});function na(e){const m=Y(e());let s=-1;function u(){clearInterval(s)}function f(){u(),le(()=>m.value=e())}function t(d){const g=d?getComputedStyle(d):{transitionDuration:.2},l=parseFloat(g.transitionDuration)*1e3||200;if(u(),m.value<=0)return;const b=performance.now();s=window.setInterval(()=>{const p=performance.now()-b+l;m.value=Math.max(e()-p,0),m.value<=0&&u()},l)}return Re(u),{clear:u,time:m,start:t,reset:f}}const la=Z({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...Te({location:"bottom"}),...xe(),..._e(),...Ie(),...Pe(),...Se(ea({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),oa=W()({name:"VSnackbar",props:la(),emits:{"update:modelValue":e=>!0},setup(e,m){let{slots:s}=m;const u=ee(e,"modelValue"),{positionClasses:f}=pe(e),{scopeId:t}=ge(),{themeClasses:d}=ye(e),{colorClasses:g,colorStyles:l,variantClasses:b}=be(e),{roundedClasses:p}=ke(e),y=na(()=>Number(e.timeout)),R=w(),S=w(),P=Y(!1),i=Y(0),r=w(),n=we(Be,void 0);Ve(()=>!!n,()=>{const c=Ae();Fe(()=>{r.value=c.mainStyles.value})}),q(u,h),q(()=>e.timeout,h),oe(()=>{u.value&&h()});let k=-1;function h(){y.reset(),window.clearTimeout(k);const c=Number(e.timeout);if(!u.value||c===-1)return;const B=Ce(S.value);y.start(B),k=window.setTimeout(()=>{u.value=!1},c)}function V(){y.reset(),window.clearTimeout(k)}function I(){P.value=!0,V()}function C(){P.value=!1,h()}function A(c){i.value=c.touches[0].clientY}function j(c){Math.abs(i.value-c.changedTouches[0].clientY)>50&&(u.value=!1)}function a(){P.value&&C()}const v=x(()=>e.location.split(" ").reduce((c,B)=>(c[`v-snackbar--${B}`]=!0,c),{}));return te(()=>{const c=J.filterProps(e),B=!!(s.default||s.text||e.text);return o(J,T({ref:R,class:["v-snackbar",{"v-snackbar--active":u.value,"v-snackbar--multi-line":e.multiLine&&!e.vertical,"v-snackbar--timer":!!e.timer,"v-snackbar--vertical":e.vertical},v.value,f.value,e.class],style:[r.value,e.style]},c,{modelValue:u.value,"onUpdate:modelValue":L=>u.value=L,contentProps:T({class:["v-snackbar__wrapper",d.value,g.value,p.value,b.value],style:[l.value],onPointerenter:I,onPointerleave:C},c.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:A,onTouchend:j,onAfterLeave:a},t),{default:()=>{var L,z;return[De(!1,"v-snackbar"),e.timer&&!P.value&&o("div",{key:"timer",class:"v-snackbar__timer"},[o(Le,{ref:S,color:typeof e.timer=="string"?e.timer:"info",max:e.timeout,"model-value":y.time.value},null)]),B&&o("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((L=s.text)==null?void 0:L.call(s))??e.text,(z=s.default)==null?void 0:z.call(s)]),s.actions&&o(Me,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[o("div",{class:"v-snackbar__actions"},[s.actions({isActive:u})])]})]},activator:s.activator})}),ne({},R)}}),ia=["src"],sa={class:"file-share d-flex flex-row ga-2 justify-center"},ra=["href"],ua={class:"text-center"},ca=Ne({__name:"ShareSocial",setup(e){const m=ze(),s=w(m.query.e),u=w(m.query.name.toUpperCase()),f=w(m.query.r),t=Ee("canvas"),d=w(!1),g=w("");let l=null;const b={yOff:-10,radius:188};oe(()=>{t.value&&(l=t.value.getContext("2d"))});const p=(i,r,n,k,h,V=!0,I=!0,C=!1)=>{i.textAlign=V?"center":"left",i.fillStyle=I?"#DCEBEB":"#007E8E",i.font=(C?"bold ":"")+n+"px NeueRadial",i.fillText(r,k,h+n/2)},y=new Image;y.src="/images/Elements/post-vertical.png",y.onload=()=>{if(l&&t.value){l.drawImage(y,0,0,t.value.width,t.value.height);const i=t.value.width/2;p(l,s.value,64,i,100,!0,!0,!0),p(l,s.value,36,i,175),p(l,u.value,36,i,675,!0,!1),p(l,f.value,36,i,735),p(l,s.value,24,165,870,!1),p(l,s.value,24,165,905,!1),l.beginPath(),l.arc(t.value.width/2,t.value.height/2+b.yOff,b.radius,0,Math.PI*2,!0),l.closePath(),l.clip(),g.value=t.value.toDataURL("image/png")}};const R=i=>{const r=i.target;if(r.files&&r.files[0]){const n=new FileReader;n.onload=k=>{var V;let h=new Image;h.src=(V=k.target)==null?void 0:V.result,h.onload=()=>{if(l&&t.value){l.drawImage(y,0,0,t.value.width,t.value.height);const I=h.height/h.width,C=b.radius*Math.max(1/I,1),A=b.radius*Math.max(I,1);l.drawImage(h,t.value.width/2-C,t.value.height/2+b.yOff-A,C*2,A*2),l.fillStyle="#DCEBEB",l.fillRect(0,652,t.value.width,200),p(l,u.value,36,t.value.width/2,675,!0,!1),g.value=t.value.toDataURL("image/png")}}},n.readAsDataURL(r.files[0])}},S=async()=>{t.value&&t.value.toBlob(async i=>{if(i==null)return;const r="lgj_"+s+"_"+f+".png",n=new File([i],r,{type:"image/png"});if(navigator.canShare&&navigator.canShare({files:[n]})&&navigator.share)try{await navigator.share({title:"Mi Tarjeta del "+s,text:"¡Mira mi tarjeta del "+s+"!",files:[n]})}catch(k){console.error(k)}else alert("Tu navegador no soporta compartir archivos.")})},P=async()=>{t.value&&t.value.toBlob(async i=>{if(i==null)return;const r=new ClipboardItem({[i.type]:i});await navigator.clipboard.write([r]),d.value=!0})};return(i,r)=>(Ye(),je(ve,{paddingType:"regular"},{default:F(()=>[o(qe,{class:"share-cont text-center d-flex flex-column ga-4 align-center"},{default:F(()=>[r[2]||(r[2]=D("h1",null,"¡Comparte!",-1)),D("canvas",{ref_key:"canvas",ref:t,width:"800",height:"1000",hidden:""}," Tu navegador no soporta el elemento canvas. ",512),D("img",{class:"img-share elevation-2",alt:"Imagen para compartir en redes sociales",src:g.value},null,8,ia),o(ta,{class:"file-share",label:"¡Sube tu foto!",hint:`Esta imagen solo se encuentra en tu navegador y no se almacena en ningún servidor.\r
        Reiniciar la página borrará la imagen.`,"persistent-hint":"",density:"compact",accept:"image/*","prepend-icon":"mdi-camera",onchange:R}),D("div",sa,[o($,{text:"¡Descarga!",location:"top",theme:"light"},{activator:F(({props:n})=>[D("a",{download:"lgj-participacion.png",href:g.value},[o(O,T({color:"secondary",icon:"mdi-download","aria-label":"descargar"},n),null,16)],8,ra)]),_:1}),o($,{text:"¡Comparte!",location:"top",theme:"light"},{activator:F(({props:n})=>[o(O,T({color:"secondary",icon:"mdi-share-variant","aria-label":"compartir",onclick:S},n),null,16)]),_:1}),o($,{text:"Copia",location:"top",theme:"light"},{activator:F(({props:n})=>[o(O,T({color:"secondary",icon:"mdi-content-copy","aria-label":"compartir",onclick:P},n),null,16)]),_:1}),o(Ue(oa),{theme:"light",modelValue:d.value,"onUpdate:modelValue":r[0]||(r[0]=n=>d.value=n),timeout:1e3},{default:F(()=>[D("div",ua,[r[1]||(r[1]=Oe(" Imagen copiada ")),o($e,{icon:"mdi-check-bold"})])]),_:1},8,["modelValue"])])]),_:1})]),_:1}))}}),ga=He(ca,[["__scopeId","data-v-58493e47"]]);export{ga as default};
